// Generated by CoffeeScript 1.4.0
var Base;

Base = (function() {

  function Base() {}

  Base.edges = {};

  Base.start = function(opts) {
    var adaptor, port, server;
    if (opts == null) {
      opts = {};
    }
    adaptor = opts.listen.adaptor || 'socket.io';
    port = process.env.PORT || opts.listen.port || 3001;
    switch (adaptor) {
      case 'socket.io':
        server = require("./adaptors/" + adaptor + "-adaptor");
        return server.listen(opts.listen, this.connect);
      default:
        throw "adaptor not implemented: " + adaptor;
    }
  };

  Base.connect = function(edge) {
    return Base.edges[edge.localId()] = edge;
  };

  Base.disconnect = function(edge) {
    return Base.edges[edge.localId()].disconnected = {
      timestamp: new Date()
    };
  };

  return Base;

}).call(this);

module.exports = Base;
