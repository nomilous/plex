// Generated by CoffeeScript 1.4.0
var Adaptor, SocketIoAdaptor, SocketIoEdge, io;

io = require('socket.io');

Adaptor = require('../adaptor');

SocketIoEdge = require('../edges/socket.io-edge');

SocketIoAdaptor = (function() {

  function SocketIoAdaptor() {}

  SocketIoAdaptor.listen = function(opts, onConnect) {
    var server;
    Adaptor.validate(opts, onConnect);
    if (!opts.port) {
      throw 'undefined opts.port';
    }
    server = io.listen(opts.port);
    server.on('connection', function(socket) {
      return onConnect(new SocketIoEdge(socket));
    });
    return server;
  };

  return SocketIoAdaptor;

})();

module.exports = SocketIoAdaptor;
