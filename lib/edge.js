// Generated by CoffeeScript 1.4.0
var Edge, os;

os = require('os');

Edge = (function() {

  function Edge(connection, opts) {
    this.connection = connection;
    this.opts = opts != null ? opts : {};
  }

  Edge.prototype.connect = function(onConnect) {
    var connectedThing,
      _this = this;
    connectedThing = {};
    this.connection = connectedThing;
    return this.send({
      'event:register': {
        type: 'pending',
        id: this.globalId()
      }
    }, function(error, response) {
      return onConnect(_this);
    });
  };

  Edge.prototype.send = function(message, onResponse) {
    this.sentAmessage = message;
    return console.log("send:", message);
  };

  Edge.prototype.localId = function() {
    if (!this.connection) {
      return 'LOCAL_ID';
    }
    return this.connection.id;
  };

  Edge.prototype.globalId = function() {
    return os.hostname() + '%' + process.pid;
  };

  return Edge;

})();

module.exports = Edge;
